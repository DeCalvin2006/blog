---
title: QBXT 2022夏 DP图论 结业赛
date: 2022-07-19 08:40:13
tags:
---

# T1 - Faker

## 题目背景

现在站在你面前的是：

$OGN2013$夏季赛冠军、$OGN$夏季赛$MVP$、$S3$世界总决赛冠军 年度$MVP$、$OGN2013-2014$冬季冠军、$OGN2013-2014$冬季赛$MVP....$(此处省略一千字)，大飞老师！！！

## 题目内容

大飞老师的$LOL$技术十分精湛，不仅可以操控好自己的角色，还可以高速切屏观察队友，查看是否有演员演自己，随着大飞老师的切屏技术愈发炉火纯青，已经可以切屏查看$n$名队友，且大飞老师已经高超到对于任意一名队友，只需要切屏看一次，就可以分辨出是否是演员。

现在大飞老师开了一场排位，与$n$位队友排到了一起，第$i$名队友的$rank$分为$ri$，$rank$分越高的队友越有可能被收买成为演员，所以对于一名还未检查过的队友，大飞老师下次切屏检查此队友的概率为此队友的$rank$分除以场上未检查过的队友的$rank$分之和，大飞老师十分自信，对于已经检查过的队友大飞老师一定不会再次切屏查看，现作为场外$ob$人员，我们知道只有第$1$名队友是真正的演员，求大飞老师期望切屏多少次后，找到真正的演员。

## 输入格式

第一行一个整数$n$，表示有$n$名队友

第二行$n$个正整数$r1,r2,....,rn$，其中第$i$个整数为第$i$个队友的$rank$分

## 输出格式

一行一个数，表示切屏次数的期望，保留 3 位小数

## 样例 1

输入

```
3
1 1 1
```

输出

```
2.000
```

## 样例 2

输入

```
5
1 2 3 2 2
```

输出

```
3.750
```

## 数据范围

$对于20$%$的数据，n<=10$

$对于40$%$的数据，n<=1000$

$对于另20$%$的数据，rank分全为1$

$对于100$%$的数据，n<=1e5,1<=ri<=1e9$

## 考场做题情况

直接摆烂，拿$20$%分数（摸

# T2 - Clearlove7

## 题目背景

对面酒桶在我们野区，他为什么要去塔里啊，下路一直叫我去，我怎么去啊？别人一直进我野区

## 题目内容

厂长的野区是一棵由$n-1$条边连接起来的一棵树，每条边有一个对应的权值$ci$

厂长准备破釜沉舟连着抓对面下路，可是对面下路不是傻瓜，不会一直停留在一个点等着厂长来抓，而且由于对面酒桶也在野区，所以走的越远厂长的安全性越低

现有$q$个事件依次发生，

事件 1：厂长出发抓对方下路，给出厂长抓人时的起点$x$，对方下路所在点$y$，与厂长初始的安全值 v，厂长沿着树上路径$x->y$依次经过每条边，每走过一条边权为$c$的边，厂长的安全值 v 会变成$\lfloor \frac{v}{c} \rfloor$，抓人结束时厂长的安全值

事件 2：修改一条边的边权，保证修改后的权值<=原来的边权，且>=1

## 输入格式

第一行$n,q$表示节点数和事件数

接下来$n-1$每行三个整数$u,v,c$表示$u$与$v$之间有一条边权为$c$的边

加下来$q$行，每行第一个数 type

如果$type=1$，则表示为事件$1$：接下来三个数$x,y,v$意义见题面

如果$type=2$，则表示为事件$2$：接下来两个整数$p,c，$表示将第$p$条边的边权修改为$c$

## 输出格式

对于每个事件$1$输出一行一个数表示答案
